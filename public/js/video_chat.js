!function(){function e(){function e(e){r.setLocalDescription(e,function(){m.emit("rtc_description",JSON.stringify({sdp:r.localDescription,tracks:v}))},n)}function o(e){e.disabled?s.length>0&&(d.removeTrack(s[0]),$(".remote-video .audio-muted").css("display","block")):s.length>0&&(d.addTrack(s[0]),$(".remote-video .audio-muted").hide())}function t(e){var o=document.querySelector("#remoteVideo");e.disabled?l.length>0&&(d.removeTrack(l[0]),$(o).hide()):s.length>0&&(d.addTrack(l[0]),$(o).show())}function n(e){console.log(e.name+": "+e.message)}(r=new g(f)).onicecandidate=function(e){console.log("candidates creation"),m.emit("rtc_candidate",JSON.stringify({candidate:e.candidate}))},r.onnegotiationneeded=function(){console.log("offer creation"),r.createOffer(e,n)},r.onaddstream=function(e){d=e.stream,s=d.getAudioTracks(),l=d.getVideoTracks(),console.log(u),void 0!=u&&(console.log(u),o(u.microphone),t(u.videocamera)),console.log("remote video");document.querySelector("#remoteVideo").srcObject=e.stream,$("#shareSection").hide(),$(".remote-video").show()},navigator.getUserMedia=navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.getUserMedia,navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then(p).catch(h),m.on("rtc_description",function(o){var t=JSON.parse(o);void 0!=t.tracks&&(u=t.tracks),r.setRemoteDescription(new RTCSessionDescription(t.sdp),function(){"offer"==r.remoteDescription.type&&r.createAnswer(e,n)},n)}),m.on("rtc_candidate",function(e){var o=JSON.parse(e);o.candidate&&r.addIceCandidate(new RTCIceCandidate(o.candidate))}),m.on("microphone mute",function(e){o(e)}),m.on("videocamera mute",function(e){t(e)})}function o(){var e=c.val();return console.log(e),m.emit("message",e,function(){t("me: "+e)}),c.val(""),!1}function t(e){console.log(e),$("<li>",{text:e,class:"chat-message"}).appendTo(a);var o=a.find("li:last");a.scrollTop(o.height()*(o.index()+1))}function n(e){$("<li>",{text:e,class:"system-message"}).appendTo(a);var o=a.find("li:last");a.scrollTop(o.height()*(o.index()+1))}var i=$("#room form"),a=$("#room ul.text-chat-messages"),c=i.find("input");if(0!=i.length){var r,d,s,l,u,m=io.connect("",{reconnectionDelay:1,reconnectionAttempts:10}),f={iceServers:[{urls:"stun:stun1.l.google.com:19302"}]},g=webkitRTCPeerConnection||mozRTCPeerConnection||g,v={microphone:{disabled:!1},videocamera:{disabled:!1}};m.on("connect",function(){n("Connected"),i.submit(o),c.prop("disabled",!1),e()}).on("message",function(e,o){t(e+": "+o)}).on("join",function(o){n(o+" joined to chat"),e()}).on("leave",function(e){n(e+" left chat"),$(".remote-video").hide(),$("#shareSection").show()}).on("logout",function(){window.location.href="/"}).on("disconnect",function(){n("Connection lost"),i.off("submit",o),c.prop("disabled",!0)}).on("reconnect_failed",function(){alert("We loose connection! Frever!")});var h=function(e){console.error("Error get media!",e)},p=function(e){console.log(e);var o=document.querySelector("#localVideo");o.srcObject=e,o.onloadedmetadata=function(o){r.addStream(e)}};$("#disable_videocamera, #disable_microphone").off("click").click(function(e){var o=$(this),t=o.attr("id").replace("disable_","");e.preventDefault();var n=!o.hasClass("disabled");return m.emit(t+" mute",{disabled:n},function(e){console.log("cb"),o.toggleClass("disabled"),v[t]=e}),!1}),$(".conv_tool").click(function(e){e.preventDefault();var o=$(this).attr("data-target");return $(o).toggle("fast"),$(this).toggleClass("disabled"),!1}),$("#copy_to_clipboard").click(function(e){return e.preventDefault(),function(){var e=$("#hidden_text_input");e.val(window.location.href),console.log(),e[0].select(),document.execCommand("copy")}(),function(e,o){o=void 0!=o?o:"";var t=$("#alert_message");t.text(e),t.addClass(o),t.show().animate({left:0},500),setTimeout(function(){t.animate({left:-200},500,function(){$(this).hide()})},2e3)}("The Link Copied To Clipboard"),!1})}}(),$(".self-video").draggable({containment:"#main",scroll:!1}),$(".text-chat").draggable({handle:".text-chat-header",containment:"#main",axis:"x",scroll:!1});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInZpZGVvX2NoYXQuanMiXSwibmFtZXMiOlsic3RhcnQiLCJsb2NhbERlc2NDcmVhdGVkIiwiZGVzYyIsInBjIiwic2V0TG9jYWxEZXNjcmlwdGlvbiIsInNvY2tldCIsImVtaXQiLCJKU09OIiwic3RyaW5naWZ5Iiwic2RwIiwibG9jYWxEZXNjcmlwdGlvbiIsInRyYWNrcyIsImxvY2FsVHJhY2tzU3RhdHVzIiwibG9nRXJyb3IiLCJzd2ljaEF1ZGlvVHJhY2siLCJzdGF0ZSIsImRpc2FibGVkIiwiYXVkaW9UcmFjayIsImxlbmd0aCIsInJlbW90ZVN0cmVhbSIsInJlbW92ZVRyYWNrIiwiJCIsImNzcyIsImFkZFRyYWNrIiwiaGlkZSIsInN3aWNoVmlkZW9UcmFjayIsInJlbW90ZV92aWRlbyIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInZpZGVvVHJhY2siLCJzaG93IiwiZXJyb3IiLCJjb25zb2xlIiwibG9nIiwibmFtZSIsIm1lc3NhZ2UiLCJSVENQZWVyQ29ubmVjdGlvbiIsImNvbmZpZ3VyYXRpb24iLCJvbmljZWNhbmRpZGF0ZSIsImV2dCIsImNhbmRpZGF0ZSIsIm9ubmVnb3RpYXRpb25uZWVkZWQiLCJjcmVhdGVPZmZlciIsIm9uYWRkc3RyZWFtIiwic3RyZWFtIiwiZ2V0QXVkaW9UcmFja3MiLCJnZXRWaWRlb1RyYWNrcyIsInJlbW90ZVRyYWNrc1N0YXR1cyIsInVuZGVmaW5lZCIsIm1pY3JvcGhvbmUiLCJ2aWRlb2NhbWVyYSIsInNyY09iamVjdCIsIm5hdmlnYXRvciIsImdldFVzZXJNZWRpYSIsIndlYmtpdEdldFVzZXJNZWRpYSIsIm1vekdldFVzZXJNZWRpYSIsIm1lZGlhRGV2aWNlcyIsInZpZGVvIiwiYXVkaW8iLCJ0aGVuIiwib25HZXRNZWRpYSIsImNhdGNoIiwib25FcnJvckdldE1lZGlhIiwib24iLCJkYXRhIiwicGFyc2UiLCJzZXRSZW1vdGVEZXNjcmlwdGlvbiIsIlJUQ1Nlc3Npb25EZXNjcmlwdGlvbiIsInJlbW90ZURlc2NyaXB0aW9uIiwidHlwZSIsImNyZWF0ZUFuc3dlciIsImFkZEljZUNhbmRpZGF0ZSIsIlJUQ0ljZUNhbmRpZGF0ZSIsInNlbmRNZXNzYWdlIiwidGV4dCIsImlucHV0IiwidmFsIiwicHJpbnRNZXNzYWdlIiwiY2xhc3MiLCJhcHBlbmRUbyIsInVsIiwiZWwiLCJmaW5kIiwic2Nyb2xsVG9wIiwiaGVpZ2h0IiwiaW5kZXgiLCJwcmludFN0YXR1cyIsImZvcm0iLCJpbyIsImNvbm5lY3QiLCJyZWNvbm5lY3Rpb25EZWxheSIsInJlY29ubmVjdGlvbkF0dGVtcHRzIiwiaWNlU2VydmVycyIsInVybHMiLCJ3ZWJraXRSVENQZWVyQ29ubmVjdGlvbiIsIm1velJUQ1BlZXJDb25uZWN0aW9uIiwic3VibWl0IiwicHJvcCIsIndpbmRvdyIsImxvY2F0aW9uIiwiaHJlZiIsIm9mZiIsImFsZXJ0IiwiZSIsImxvY2FsX3ZpZGVvIiwib25sb2FkZWRtZXRhZGF0YSIsImFkZFN0cmVhbSIsImNsaWNrIiwiZWxlbSIsInRoaXMiLCJldmVudF9wYXJ0X25hbWUiLCJhdHRyIiwicmVwbGFjZSIsInByZXZlbnREZWZhdWx0IiwiaGFzQ2xhc3MiLCJ0b2dnbGVDbGFzcyIsInRhcmdldCIsInRvZ2dsZSIsImNvcHlUZXh0Iiwic2VsZWN0IiwiZXhlY0NvbW1hbmQiLCJjb3B5IiwiYWRkQ2xhc3MiLCJhbmltYXRlIiwibGVmdCIsInNldFRpbWVvdXQiLCJhbGVydF9tZXNzYWdlIiwiZHJhZ2dhYmxlIiwiY29udGFpbm1lbnQiLCJzY3JvbGwiLCJoYW5kbGUiLCJheGlzIl0sIm1hcHBpbmdzIjoiQ0FBQSxXQTJESSxTQUFTQSxJQXlDTCxTQUFTQyxFQUFpQkMsR0FFdEJDLEVBQUdDLG9CQUFvQkYsRUFBTSxXQUN6QkcsRUFBT0MsS0FBSyxrQkFBbUJDLEtBQUtDLFdBQ2hDQyxJQUFPTixFQUFHTyxpQkFDVkMsT0FBU0MsTUFFZEMsR0E4QlAsU0FBU0MsRUFBZ0JDLEdBQ2xCQSxFQUFNQyxTQUNEQyxFQUFXQyxPQUFT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RyxlQUFnQjBHLFdBQVdDLFlBQWEsUUFBU0MsUUFBUSxJQUM1RDVHLEVBQUcsY0FBZTBHLFdBQVdHLE9BQVEsb0JBQXFCRixZQUFhLFFBQVNHLEtBQU0sSUFBS0YsUUFBUSIsImZpbGUiOiJ2aWRlb19jaGF0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBmb3JtID0gJCgnI3Jvb20gZm9ybScpO1xyXG4gICAgdmFyIHVsID0gJCgnI3Jvb20gdWwudGV4dC1jaGF0LW1lc3NhZ2VzJyk7XHJcbiAgICB2YXIgaW5wdXQgPSBmb3JtLmZpbmQoJ2lucHV0Jyk7XHJcblxyXG4gICAgaWYoZm9ybS5sZW5ndGggPT0gMClcclxuICAgICAgICByZXR1cm47XHJcblxyXG4gICAgdmFyIHNvY2tldCA9IGlvLmNvbm5lY3QoJycsIHtcclxuICAgICAgICByZWNvbm5lY3Rpb25EZWxheTogMSxcclxuICAgICAgICByZWNvbm5lY3Rpb25BdHRlbXB0czogMTBcclxuICAgIH0pO1xyXG5cclxuICAgIHZhciBjb25maWd1cmF0aW9uID0ge1xyXG4gICAgICAgIGljZVNlcnZlcnMgOltcclxuICAgICAgICAgICAgeyB1cmxzOidzdHVuOnN0dW4xLmwuZ29vZ2xlLmNvbToxOTMwMid9XHJcbiAgICAgICAgXVxyXG4gICAgfTtcclxuICAgIHZhciBSVENQZWVyQ29ubmVjdGlvbiA9IHdlYmtpdFJUQ1BlZXJDb25uZWN0aW9uIHx8IG1velJUQ1BlZXJDb25uZWN0aW9uIHx8IFJUQ1BlZXJDb25uZWN0aW9uO1xyXG4gICAgdmFyIHBjO1xyXG4gICAgdmFyIHJlbW90ZVN0cmVhbTtcclxuICAgIHZhciBhdWRpb1RyYWNrO1xyXG4gICAgdmFyIHZpZGVvVHJhY2s7XHJcblxyXG4gICAgLy8gU2V0IGxvY2FsIHRyYWNrIHN0YXR1c2VzXHJcbiAgICB2YXIgbG9jYWxUcmFja3NTdGF0dXMgPSB7J21pY3JvcGhvbmUnOnsnZGlzYWJsZWQnOmZhbHNlfSwgJ3ZpZGVvY2FtZXJhJzp7J2Rpc2FibGVkJzpmYWxzZX19O1xyXG4gICAgdmFyIHJlbW90ZVRyYWNrc1N0YXR1cztcclxuXHJcbiAgICBzb2NrZXRcclxuICAgICAgICAub24oJ2Nvbm5lY3QnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHByaW50U3RhdHVzKFwiQ29ubmVjdGVkXCIpO1xyXG4gICAgICAgICAgICBmb3JtLnN1Ym1pdChzZW5kTWVzc2FnZSk7XHJcbiAgICAgICAgICAgIGlucHV0LnByb3AoJ2Rpc2FibGVkJywgZmFsc2UpO1xyXG4gICAgICAgICAgICBzdGFydCgpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLm9uKCdtZXNzYWdlJywgZnVuY3Rpb24gKG5hbWUsIHRleHQpIHtcclxuICAgICAgICAgICAgcHJpbnRNZXNzYWdlKG5hbWUgKyAnOiAnICsgdGV4dCk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAub24oJ2pvaW4nLCBmdW5jdGlvbiAobmFtZSkge1xyXG4gICAgICAgICAgICBwcmludFN0YXR1cyhuYW1lICsgXCIgam9pbmVkIHRvIGNoYXRcIik7XHJcbiAgICAgICAgICAgIHN0YXJ0KCk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAub24oJ2xlYXZlJywgZnVuY3Rpb24gKG5hbWUpIHtcclxuICAgICAgICAgICAgcHJpbnRTdGF0dXMobmFtZSArIFwiIGxlZnQgY2hhdFwiKTtcclxuICAgICAgICAgICAgJCgnLnJlbW90ZS12aWRlbycpLmhpZGUoKTtcclxuICAgICAgICAgICAgJCgnI3NoYXJlU2VjdGlvbicpLnNob3coKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5vbignbG9nb3V0JywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcvJztcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5vbignZGlzY29ubmVjdCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcHJpbnRTdGF0dXMoXCJDb25uZWN0aW9uIGxvc3RcIik7XHJcbiAgICAgICAgICAgIGZvcm0ub2ZmKCdzdWJtaXQnLCBzZW5kTWVzc2FnZSk7XHJcbiAgICAgICAgICAgIGlucHV0LnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAub24oJ3JlY29ubmVjdF9mYWlsZWQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGFsZXJ0KCdXZSBsb29zZSBjb25uZWN0aW9uISBGcmV2ZXIhJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgZnVuY3Rpb24gc3RhcnQoKSB7XHJcbiAgICAgICAgLy8gQ3RlYXRlIFJQQyBvYmplY3RcclxuICAgICAgICBwYyA9IG5ldyBSVENQZWVyQ29ubmVjdGlvbihjb25maWd1cmF0aW9uKTtcclxuXHJcbiAgICAgICAgLy8gU2VuZCBjYW5kaXN0YXRlcyBvbmNlIHRoZXkgYXJlIGNyZWF0ZWRcclxuICAgICAgICBwYy5vbmljZWNhbmRpZGF0ZSA9IGZ1bmN0aW9uIChldnQpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2NhbmRpZGF0ZXMgY3JlYXRpb24nKTtcclxuICAgICAgICAgICAgc29ja2V0LmVtaXQoJ3J0Y19jYW5kaWRhdGUnLCBKU09OLnN0cmluZ2lmeSh7IFwiY2FuZGlkYXRlXCI6IGV2dC5jYW5kaWRhdGUgfSkpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIGxldCB0aGUgJ25lZ290aWF0aW9ubmVlZGVkJyBldmVudCB0cmlnZ2VyIG9mZmVyIGdlbmVyYXRpb25cclxuICAgICAgICBwYy5vbm5lZ290aWF0aW9ubmVlZGVkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnb2ZmZXIgY3JlYXRpb24nKTtcclxuICAgICAgICAgICAgcGMuY3JlYXRlT2ZmZXIobG9jYWxEZXNjQ3JlYXRlZCwgbG9nRXJyb3IpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gb25jZSByZW1vdGUgc3RyZWFtIGFycml2ZXMsIHNob3cgaXQgaW4gdGhlIHJlbW90ZSB2aWRlbyBlbGVtZW50XHJcbiAgICAgICAgcGMub25hZGRzdHJlYW0gPSBmdW5jdGlvbiAoZXZ0KSB7XHJcbiAgICAgICAgICAgIHJlbW90ZVN0cmVhbSA9IGV2dC5zdHJlYW07XHJcblxyXG4gICAgICAgICAgICBhdWRpb1RyYWNrID0gcmVtb3RlU3RyZWFtLmdldEF1ZGlvVHJhY2tzKCk7XHJcbiAgICAgICAgICAgIHZpZGVvVHJhY2sgPSByZW1vdGVTdHJlYW0uZ2V0VmlkZW9UcmFja3MoKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2cocmVtb3RlVHJhY2tzU3RhdHVzKTtcclxuICAgICAgICAgICAgaWYocmVtb3RlVHJhY2tzU3RhdHVzICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVtb3RlVHJhY2tzU3RhdHVzKTtcclxuICAgICAgICAgICAgICAgIHN3aWNoQXVkaW9UcmFjayhyZW1vdGVUcmFja3NTdGF0dXMubWljcm9waG9uZSk7XHJcbiAgICAgICAgICAgICAgICBzd2ljaFZpZGVvVHJhY2socmVtb3RlVHJhY2tzU3RhdHVzLnZpZGVvY2FtZXJhKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gQ2hlY2sgdXNlciBkaXNhYmxlZCB2aWRlbyBvciBhdWRpb1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygncmVtb3RlIHZpZGVvJyk7XHJcblxyXG4gICAgICAgICAgICB2YXIgcmVtb3RlX3ZpZGVvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3JlbW90ZVZpZGVvJyk7XHJcbiAgICAgICAgICAgIHJlbW90ZV92aWRlby5zcmNPYmplY3QgPSBldnQuc3RyZWFtO1xyXG5cclxuICAgICAgICAgICAgJCgnI3NoYXJlU2VjdGlvbicpLmhpZGUoKTtcclxuICAgICAgICAgICAgJCgnLnJlbW90ZS12aWRlbycpLnNob3coKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBnZXRVc2VyTWVkaWEoKTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gbG9jYWxEZXNjQ3JlYXRlZChkZXNjKSB7XHJcblxyXG4gICAgICAgICAgICBwYy5zZXRMb2NhbERlc2NyaXB0aW9uKGRlc2MsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHNvY2tldC5lbWl0KCdydGNfZGVzY3JpcHRpb24nLCBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgICAgICAgICAgJ3NkcCc6IHBjLmxvY2FsRGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgJ3RyYWNrcyc6bG9jYWxUcmFja3NTdGF0dXNcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuICAgICAgICAgICAgfSwgbG9nRXJyb3IpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc29ja2V0Lm9uKCdydGNfZGVzY3JpcHRpb24nLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICB2YXIgbWVzc2FnZSA9IEpTT04ucGFyc2UoZGF0YSk7XHJcblxyXG4gICAgICAgICAgICBpZihtZXNzYWdlLnRyYWNrcyAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHJlbW90ZVRyYWNrc1N0YXR1cyA9IG1lc3NhZ2UudHJhY2tzO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHBjLnNldFJlbW90ZURlc2NyaXB0aW9uKG5ldyBSVENTZXNzaW9uRGVzY3JpcHRpb24obWVzc2FnZS5zZHApLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBpZiB3ZSByZWNlaXZlZCBhbiBvZmZlciwgd2UgbmVlZCB0byBhbnN3ZXJcclxuICAgICAgICAgICAgICAgIGlmIChwYy5yZW1vdGVEZXNjcmlwdGlvbi50eXBlID09ICdvZmZlcicpXHJcbiAgICAgICAgICAgICAgICAgICAgcGMuY3JlYXRlQW5zd2VyKGxvY2FsRGVzY0NyZWF0ZWQsIGxvZ0Vycm9yKTtcclxuICAgICAgICAgICAgfSwgbG9nRXJyb3IpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBzb2NrZXQub24oJ3J0Y19jYW5kaWRhdGUnLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICB2YXIgbWVzc2FnZSA9IEpTT04ucGFyc2UoZGF0YSk7XHJcbiAgICAgICAgICAgIGlmKG1lc3NhZ2UuY2FuZGlkYXRlKVxyXG4gICAgICAgICAgICAgICAgcGMuYWRkSWNlQ2FuZGlkYXRlKG5ldyBSVENJY2VDYW5kaWRhdGUobWVzc2FnZS5jYW5kaWRhdGUpKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgc29ja2V0Lm9uKCdtaWNyb3Bob25lIG11dGUnLCBmdW5jdGlvbiAoc3RhdGUpIHtcclxuICAgICAgICAgICAgc3dpY2hBdWRpb1RyYWNrKHN0YXRlKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgc29ja2V0Lm9uKCd2aWRlb2NhbWVyYSBtdXRlJywgZnVuY3Rpb24gKHN0YXRlKSB7XHJcbiAgICAgICAgICAgIHN3aWNoVmlkZW9UcmFjayhzdGF0ZSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHN3aWNoQXVkaW9UcmFjayhzdGF0ZSkge1xyXG4gICAgICAgICAgICBpZihzdGF0ZS5kaXNhYmxlZCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGF1ZGlvVHJhY2subGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlbW90ZVN0cmVhbS5yZW1vdmVUcmFjayhhdWRpb1RyYWNrWzBdKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcucmVtb3RlLXZpZGVvIC5hdWRpby1tdXRlZCcpLmNzcygnZGlzcGxheScsJ2Jsb2NrJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYXVkaW9UcmFjay5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVtb3RlU3RyZWFtLmFkZFRyYWNrKGF1ZGlvVHJhY2tbMF0pO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5yZW1vdGUtdmlkZW8gLmF1ZGlvLW11dGVkJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBzd2ljaFZpZGVvVHJhY2soc3RhdGUpIHtcclxuICAgICAgICAgICAgdmFyIHJlbW90ZV92aWRlbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNyZW1vdGVWaWRlbycpO1xyXG4gICAgICAgICAgICBpZihzdGF0ZS5kaXNhYmxlZCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHZpZGVvVHJhY2subGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlbW90ZVN0cmVhbS5yZW1vdmVUcmFjayh2aWRlb1RyYWNrWzBdKTtcclxuICAgICAgICAgICAgICAgICAgICAkKHJlbW90ZV92aWRlbykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKGF1ZGlvVHJhY2subGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlbW90ZVN0cmVhbS5hZGRUcmFjayh2aWRlb1RyYWNrWzBdKTtcclxuICAgICAgICAgICAgICAgICAgICAkKHJlbW90ZV92aWRlbykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBsb2dFcnJvcihlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvci5uYW1lICsgJzogJyArIGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB2YXIgb25FcnJvckdldE1lZGlhID0gZnVuY3Rpb24oZSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdldCBtZWRpYSEnLCBlKTtcclxuICAgIH07XHJcblxyXG4gICAgdmFyIG9uR2V0TWVkaWEgPSBmdW5jdGlvbihzdHJlYW0pIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhzdHJlYW0pO1xyXG4gICAgICAgIHZhciBsb2NhbF92aWRlbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNsb2NhbFZpZGVvJyk7XHJcbiAgICAgICAgbG9jYWxfdmlkZW8uc3JjT2JqZWN0ID0gc3RyZWFtO1xyXG5cclxuICAgICAgICBsb2NhbF92aWRlby5vbmxvYWRlZG1ldGFkYXRhID0gZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICBwYy5hZGRTdHJlYW0oc3RyZWFtKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBnZXRVc2VyTWVkaWEgKCkge1xyXG5cclxuICAgICAgICBuYXZpZ2F0b3IuZ2V0VXNlck1lZGlhID1cclxuICAgICAgICAgICAgbmF2aWdhdG9yLndlYmtpdEdldFVzZXJNZWRpYSB8fFxyXG4gICAgICAgICAgICBuYXZpZ2F0b3IubW96R2V0VXNlck1lZGlhIHx8IG5hdmlnYXRvci5nZXRVc2VyTWVkaWE7XHJcblxyXG4gICAgICAgIC8vIE5vdCBzaG93aW5nIHZlbmRvciBwcmVmaXhlcy5cclxuICAgICAgICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSh7dmlkZW86dHJ1ZSwgYXVkaW86dHJ1ZX0pLnRoZW4ob25HZXRNZWRpYSkuY2F0Y2gob25FcnJvckdldE1lZGlhKTtcclxuICAgIH07XHJcblxyXG4gICAgJCgnI2Rpc2FibGVfdmlkZW9jYW1lcmEsICNkaXNhYmxlX21pY3JvcGhvbmUnKS5vZmYoJ2NsaWNrJykuY2xpY2soZnVuY3Rpb24gKGUpIHtcclxuXHJcbiAgICAgICAgdmFyIGVsZW0gPSAkKHRoaXMpO1xyXG4gICAgICAgIHZhciBldmVudF9wYXJ0X25hbWUgPSBlbGVtLmF0dHIoJ2lkJykucmVwbGFjZSgnZGlzYWJsZV8nLCAnJyk7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIC8vIGNoZWNrIGN1cnJlbnQgc3RhdGUgYW5kIHNlbiBuZXdcclxuICAgICAgICB2YXIgZGlzYWJsZWQgPSBlbGVtLmhhc0NsYXNzKCdkaXNhYmxlZCcpID8gZmFsc2UgOiB0cnVlO1xyXG4gICAgICAgIC8vIHNlbmQgbmV3IHN0YXRlXHJcbiAgICAgICAgc29ja2V0LmVtaXQoZXZlbnRfcGFydF9uYW1lICsgJyBtdXRlJywge2Rpc2FibGVkOiBkaXNhYmxlZH0sIGZ1bmN0aW9uIChzdGF0ZSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnY2InKTtcclxuICAgICAgICAgICAgZWxlbS50b2dnbGVDbGFzcygnZGlzYWJsZWQnKTtcclxuICAgICAgICAgICAgbG9jYWxUcmFja3NTdGF0dXNbZXZlbnRfcGFydF9uYW1lXSA9IHN0YXRlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH0pO1xyXG5cclxuICAgICQoJy5jb252X3Rvb2wnKS5jbGljayhmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgICAgdmFyIHRhcmdldCA9ICQodGhpcykuYXR0cignZGF0YS10YXJnZXQnKTtcclxuXHJcbiAgICAgICAgJCh0YXJnZXQpLnRvZ2dsZSgnZmFzdCcpO1xyXG4gICAgICAgICQodGhpcykudG9nZ2xlQ2xhc3MoJ2Rpc2FibGVkJyk7XHJcblxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH0pO1xyXG5cclxuXHJcbiAgICAkKCcjY29weV90b19jbGlwYm9hcmQnKS5jbGljayhmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBjb3B5KCk7XHJcbiAgICAgICAgYWxlcnRfbWVzc2FnZSgnVGhlIExpbmsgQ29waWVkIFRvIENsaXBib2FyZCcpO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH0pO1xyXG5cclxuXHJcbiAgICAvKioqKiBIZWxwIGZ1bmN0aW9ucyAqKioqL1xyXG4gICAgZnVuY3Rpb24gc2VuZE1lc3NhZ2UoKSB7XHJcbiAgICAgICAgdmFyIHRleHQgPSBpbnB1dC52YWwoKTtcclxuICAgICAgICBjb25zb2xlLmxvZyh0ZXh0KTtcclxuICAgICAgICBzb2NrZXQuZW1pdCgnbWVzc2FnZScsIHRleHQsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcHJpbnRNZXNzYWdlKCdtZTogJyArIHRleHQpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpbnB1dC52YWwoJycpO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBwcmludE1lc3NhZ2UodGV4dCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHRleHQpO1xyXG4gICAgICAgICQoJzxsaT4nLCB7dGV4dDogdGV4dCwgY2xhc3M6IFwiY2hhdC1tZXNzYWdlXCJ9KS5hcHBlbmRUbyh1bCk7XHJcbiAgICAgICAgdmFyIGVsID0gdWwuZmluZCgnbGk6bGFzdCcpO1xyXG4gICAgICAgIHVsLnNjcm9sbFRvcChlbC5oZWlnaHQoKSAqIChlbC5pbmRleCgpICsgMSkpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHByaW50U3RhdHVzKHRleHQpIHtcclxuICAgICAgICAkKCc8bGk+Jywge3RleHQ6IHRleHQsIGNsYXNzOiBcInN5c3RlbS1tZXNzYWdlXCJ9KS5hcHBlbmRUbyh1bCk7XHJcbiAgICAgICAgdmFyIGVsID0gdWwuZmluZCgnbGk6bGFzdCcpO1xyXG4gICAgICAgIHVsLnNjcm9sbFRvcChlbC5oZWlnaHQoKSAqIChlbC5pbmRleCgpICsgMSkpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGFsZXJ0X21lc3NhZ2UodGV4dCwgdHlwZSkge1xyXG4gICAgICAgIHR5cGUgPSB0eXBlICE9IHVuZGVmaW5lZCA/IHR5cGUgOiAnJztcclxuICAgICAgICB2YXIgZWxlbSA9ICQoJyNhbGVydF9tZXNzYWdlJyk7XHJcbiAgICAgICAgZWxlbS50ZXh0KHRleHQpO1xyXG4gICAgICAgIGVsZW0uYWRkQ2xhc3ModHlwZSk7XHJcbiAgICAgICAgZWxlbS5zaG93KCkuYW5pbWF0ZSh7bGVmdDowfSwgNTAwKTtcclxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgZWxlbS5hbmltYXRlKHtsZWZ0Oi0yMDB9LCA1MDAsZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5oaWRlKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sIDIwMDApO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGNvcHkoKSB7XHJcbiAgICAgICAgdmFyIGNvcHlUZXh0ID0gJChcIiNoaWRkZW5fdGV4dF9pbnB1dFwiKTtcclxuICAgICAgICBjb3B5VGV4dC52YWwod2luZG93LmxvY2F0aW9uLmhyZWYpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCk7XHJcbiAgICAgICAgY29weVRleHRbMF0uc2VsZWN0KCk7XHJcbiAgICAgICAgZG9jdW1lbnQuZXhlY0NvbW1hbmQoXCJjb3B5XCIpO1xyXG4gICAgfVxyXG4gICAgLyoqKiogLkhlbHAgZnVuY3Rpb25zICoqKiovXHJcblxyXG59KSgpO1xyXG5cclxuKGZ1bmN0aW9uICgpIHtcclxuXHJcblxyXG5cclxufSkoKTtcclxuXHJcbihmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgJCggXCIuc2VsZi12aWRlb1wiICkuZHJhZ2dhYmxlKHtjb250YWlubWVudDogXCIjbWFpblwiLCBzY3JvbGw6IGZhbHNlIH0pO1xyXG4gICAgJCggXCIudGV4dC1jaGF0XCIgKS5kcmFnZ2FibGUoe2hhbmRsZTogXCIudGV4dC1jaGF0LWhlYWRlclwiLCBjb250YWlubWVudDogXCIjbWFpblwiLCBheGlzOiBcInhcIiwgc2Nyb2xsOiBmYWxzZSB9KTtcclxuXHJcbn0pKCk7Il19
